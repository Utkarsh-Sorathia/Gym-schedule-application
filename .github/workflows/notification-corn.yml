name: Push Notifications Cron

on:
    schedule:
        # Runs every 30 minutes
        - cron: "*/30 * * * *"
    workflow_dispatch: # Allows manual triggering for testing

jobs:
    send-notifications:
        runs-on: ubuntu-latest
        steps:
            - name: Trigger Notification Cron
              run: |
                  curl -X GET "${{ secrets.NEXT_PUBLIC_BASE_URL }}/api/notifications/cron" \
                    -H "Authorization: Bearer ${{ secrets.CRON_SECRET }}" \
                    -H "Content-Type: application/json" \
                    -w "\nHTTP Status: %{http_code}\n"
